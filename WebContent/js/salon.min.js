$(function(){var a=React.createClass({displayName:"SalonName",getInitialState:function(){return{t_hairSalonMaster_salon_name:""}},changeText:function(a){this.setState({t_hairSalonMaster_salon_name:a.target.value})},render:function(){return React.createElement("div",null,React.createElement("input",{type:"text",value:this.state.t_hairSalonMaster_salon_name,onChange:this.changeText}))}}),b=React.createClass({displayName:"SalonCountry",getDefaultProps:function(){return{area:[""]}},getInitialState:function(){return{t_area_name:""}},onChangeSelectValue:function(a){var b=getSlaveAreasByAreaName(N.area,a.target.value);x.setProps({area:b}),x.setState({t_area_id:getAreaIdByAreaName(a.target.value,b)}),this.setState({t_area_name:a.target.value})},render:function(){var a=this.props.area.map(function(a){return React.createElement("option",{value:a.area_name},a.area_name)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_area_name,onChange:this.onChangeSelectValue},a))}}),c=React.createClass({displayName:"SalonArea",getDefaultProps:function(){return{area:[""]}},getInitialState:function(){return{t_area_id:""}},onChangeSelectValue:function(a){this.setState({t_area_id:a.target.value})},render:function(){var a=this.props.area.map(function(a){return React.createElement("option",{value:a.t_area_id},a.t_area_name)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_area_id,onChange:this.onChangeSelectValue},a))}}),d=React.createClass({displayName:"SalonDetailText",getInitialState:function(){return{t_hairSalonMaster_detailText:""}},onChangeText:function(a){this.setState({t_hairSalonMaster_detailText:a.target.value})},onClick:function(){this.setState({t_hairSalonMaster_detailText:this.refs.textArea.getDOMNode().value})},render:function(){return React.createElement("div",null,React.createElement("div",null,React.createElement("textarea",{value:this.state.t_hairSalonMaster_detailText,onChange:this.onChangeText})))}}),e=React.createClass({displayName:"SalonOpenTime",getDefaultProps:function(){return{open_time:["9:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00"]}},getInitialState:function(){return{t_hairSalonMaster_openTime:this.props.open_time[0]}},onChangeSelectValue:function(a){this.setState({t_hairSalonMaster_openTime:a.target.value})},render:function(){var a=this.props.open_time.map(function(a){return React.createElement("option",{value:a},a)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_openTime,onChange:this.onChangeSelectValue},a))}}),f=React.createClass({displayName:"SalonCloseTime",getDefaultProps:function(){return{close_time:["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"]}},getInitialState:function(){return{t_hairSalonMaster_closeTime:this.props.close_time[0]}},onChangeSelectValue:function(a){this.setState({t_hairSalonMaster_closeTime:a.target.value})},render:function(){var a=this.props.close_time.map(function(a){return React.createElement("option",{value:a},a)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_closeTime,onChange:this.onChangeSelectValue},a))}}),g=React.createClass({displayName:"SalonCloseDay",getDefaultProps:function(){return{close_day:["星期一","星期二","星期三","星期四","星期五","星期六","星期日","终年无休"]}},getInitialState:function(){return{t_hairSalonMaster_closeDay:"星期一"}},onChangeSelectValue:function(a){this.setState({t_hairSalonMaster_closeDay:a.target.value})},render:function(){var a=this.props.close_day.map(function(a){return React.createElement("option",{value:a},a)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_closeDay,onChange:this.onChangeSelectValue},a))}}),h=React.createClass({displayName:"SalonCreditAvailable",getDefaultProps:function(){return{credit:[{value:0,text:"信用卡不可用"},{value:1,text:"信用卡可用"}]}},getInitialState:function(){return{t_hairSalonMaster_creditAvailable:0}},onChangeSelectValue:function(a){this.setState({t_hairSalonMaster_creditAvailable:a.target.value})},render:function(){var a=this.props.credit.map(function(a){return React.createElement("option",{value:a.value},a.text)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_creditAvailable,onChange:this.onChangeSelectValue},a))}}),i=React.createClass({displayName:"SalonCarParkAvailable",getDefaultProps:function(){return{car_park:[{value:0,text:"无"},{value:1,text:"有"}]}},getInitialState:function(){return{t_hairSalonMaster_carParkAvailable:0}},onChangeSelectValue:function(a){this.setState({t_hairSalonMaster_carParkAvailable:a.target.value})},render:function(){var a=this.props.car_park.map(function(a){return React.createElement("option",{value:a.value},a.text)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_carParkAvailable,onChange:this.onChangeSelectValue},a))}}),k=React.createClass({displayName:"SalonJapaneseAvailable",getDefaultProps:function(){return{japanese:[{value:0,text:"无日语接待"},{value:1,text:"日语接待"}]}},getInitialState:function(){return{t_hairSalonMaster_japaneseAvailable:0}},onChangeSelectValue:function(a){this.setState({t_hairSalonMaster_japaneseAvailable:a.target.value})},render:function(){var a=this.props.japanese.map(function(a){return React.createElement("option",{value:a.value},a.text)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_japaneseAvailable,onChange:this.onChangeSelectValue},a))}}),l=React.createClass({displayName:"SalonImagePath",getInitialState:function(){return{t_hairSalonMaster_salonImagePath:["img/notfound.jpg","img/notfound.jpg","img/notfound.jpg","img/notfound.jpg"]}},render:function(){var a=this.state.t_hairSalonMaster_salonImagePath.map(function(a){return React.createElement("div",{className:"salon_image_path_div"},React.createElement("img",{className:"salon_image_img",src:a}))});return React.createElement("div",null,a)}}),m=React.createClass({displayName:"SalonServiceTag",getDefaultProps:function(){return{service_tag:[""]}},getInitialState:function(){return{t_hairSalonMaster_searchConditionId:""}},onChangeSelectValue:function(a){var b=u(a.target.value),c=document.getElementsByName("tags"),d="";for(p=0;p<c.length;p++)-1!=u(c[p].value)&&(0==d.length?d=u(c[p].value):d+=","+u(c[p].value));_=d,_+="",t(_,b)||(_.length<=0?_=b:_+=","+b),$("#salon_cond_list1").tagit("removeAll");var e=da(_,0);for(V=0;V<e.length;V++)$("#salon_cond_list1").tagit("createTag",e[V]);console.log("title1_condId:"+_),this.setState({t_hairSalonMaster_searchConditionId:_})},render:function(){var a=this.props.service_tag.map(function(a){return React.createElement("option",{value:a},a)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_searchConditionId,onChange:this.onChangeSelectValue},a))}}),n=React.createClass({displayName:"SalonServiceTag2",getDefaultProps:function(){return{service_tag:[""]}},getInitialState:function(){return{t_hairSalonMaster_searchConditionId:""}},onChangeSelectValue:function(a){var b=u(a.target.value),c=document.getElementsByName("tags2"),d="";for(p=0;p<c.length;p++)-1!=u(c[p].value)&&(0==d.length?d=u(c[p].value):d+=","+u(c[p].value));_=d,_+="",t(_,b)||(_.length<=0?_=b:_+=","+b),$("#salon_cond_list2").tagit("removeAll");var e=da(_,1);for(V=0;V<e.length;V++)$("#salon_cond_list2").tagit("createTag",e[V]);console.log("title2_condId:"+_),this.setState({t_hairSalonMaster_searchConditionId:_})},render:function(){var a=this.props.service_tag.map(function(a){return React.createElement("option",{value:a},a)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_searchConditionId,onChange:this.onChangeSelectValue},a))}}),o=React.createClass({displayName:"SalonMail",getInitialState:function(){return{t_hairSalonMaster_mail:""}},changeText:function(a){this.setState({t_hairSalonMaster_mail:a.target.value})},render:function(){return React.createElement("div",null,React.createElement("input",{type:"email",placeholder:"【例】youjiandizi-888@meihaiwang.com","class":"input-xxlarge",value:this.state.t_hairSalonMaster_mail,onChange:this.changeText}))}}),r=React.createClass({displayName:"SalonPass",getInitialState:function(){return{t_hairSalonMaster_pass:""}},changeText:function(a){this.setState({t_hairSalonMaster_pass:a.target.value})},render:function(){return React.createElement("div",null,React.createElement("input",{type:"password",placeholder:"请填写6～20字的半角英文或数字","class":"input-xxlarge",value:this.state.t_hairSalonMaster_pass,onChange:this.changeText}))}}),s=React.createClass({displayName:"SalonPassConfirm",getInitialState:function(){return{t_hairSalonMaster_confirm:""}},changeText:function(a){this.setState({t_hairSalonMaster_confirm:a.target.value})},render:function(){return React.createElement("div",null,React.createElement("input",{type:"password",id:"confirm",placeholder:"请在输入一次密码","class":"input-xxlarge",value:this.state.t_hairSalonMaster_confirm,onChange:this.changeText}))}}),t=function(a,b){a+="";var c=a.split(",");for(V=0;V<c.length;V++)if(c[V]==b)return!0;return!1},u=function(a){var b=-1;for(V=0;V<R.length;V++)a==R[V].name&&(b=R[V].id);return b},v=React.render(React.createElement(a,null),document.getElementById("salon_salon_name")),w=React.render(React.createElement(b,null),document.getElementById("salon_country")),x=React.render(React.createElement(c,null),document.getElementById("salon_area")),y=React.render(React.createElement(d,null),document.getElementById("salon_detail_text")),z=React.render(React.createElement(e,null),document.getElementById("salon_open_time")),A=React.render(React.createElement(f,null),document.getElementById("salon_close_time")),B=React.render(React.createElement(g,null),document.getElementById("salon_close_day")),C=React.render(React.createElement(h,null),document.getElementById("salon_credit_available")),D=React.render(React.createElement(i,null),document.getElementById("salon_car_park_available")),E=React.render(React.createElement(k,null),document.getElementById("salon_japanese_available")),F=React.render(React.createElement(l,null),document.getElementById("salon_image_path")),G=React.render(React.createElement(m,null),document.getElementById("salon_cond_tag1")),H=React.render(React.createElement(n,null),document.getElementById("salon_cond_tag2")),I=React.render(React.createElement(o,null),document.getElementById("salon_mail")),J=React.render(React.createElement(r,null),document.getElementById("salon_pass")),K=React.render(React.createElement(s,null),document.getElementById("salon_pass_confirm")),L=getSessionInfo(),M=getSalonInfo(L.t_hairSalonMaster_salonId),N=getCountryAreaList(),O={t_masterSearchConditionType:"サロン検索条件"};sanitaize.encode(O);var P=getSearchConditionList(O);sanitaize.decode(M),sanitaize.decode(N),sanitaize.decode(P);var Q=P.titles,R=P.values,S=new Array,T=new Array;(function(){for(V=0;V<Q.length;V++)S[V]={id:Q[V].id,name:Q[V].name};for(V=0;V<S.length;V++){T[V]=new Array;var a=0;for(j=0;j<R.length;j++)S[V].id==R[j].titleID&&(T[V][a]={id:R[j].id,name:R[j].name},a++)}})();$("#salon_cond_tag_name1").text(S[0].name),$("#salon_cond_tag_name2").text(S[1].name),$("#account-name").text(L.t_hairSalonMaster_contactUserName);for(var U=new Array,V=(new Array,0);V<N.area.length;V++){var W=N.area[V].t_area_id,X=N.area[V].t_area_name;U[V]={area_id:W,area_name:X}}""==M.t_area_name&&(M.t_area_name=N.area[0].area_slave[0].t_area_name);var X=getAreaNameBySlaveAreaName(N.area,M.t_area_name),Y=getSlaveAreasByAreaName(N.area,X),Z=new Array;Z=M.t_hairSalonMaster_salonImagePath.split(",");for(var V=Z.length;4>V;V++)Z[V]="img/notfound.jpg";M.t_hairSalonMaster_salonImagePath=Z,v.setState(M),w.setState({t_area_name:X}),w.setProps({area:U}),x.setState({t_area_id:M.t_hairSalonMaster_areaId}),x.setProps({area:Y}),y.setState(M),""!=M.t_hairSalonMaster_openTime&&z.setState(M),""!=M.t_hairSalonMaster_closeTime&&A.setState(M),""!=M.t_hairSalonMaster_closeDay&&B.setState(M),""!=M.t_hairSalonMaster_creditAvailable&&C.setState(M),""!=M.t_hairSalonMaster_carParkAvailable&&D.setState(M),""!=M.t_hairSalonMaster_japaneseAvailable&&E.setState(M),F.setState(M),I.setState(M);var _=M.t_hairSalonMaster_searchConditionId,aa=function(a){var b=[];for(b.push(" "),V=0;V<T[a].length;V++)b.push(T[a][V].name),console.log("v1.push:"+T[a][V].name);return b},ba=aa(0);G.setProps({service_tag:ba});var ca=aa(1);H.setProps({service_tag:ca});var da=function(a,b){var c=[];a+="";var d=a.split(",");for(V=0;V<d.length;V++)for(j=0;j<R.length;j++)d[V]==R[j].id&&R[j].titleID==S[b].id&&c.push(R[j].name);return c};$("#salon_cond_list1").tagit({placeholderText:"",fieldName:"tags"});var ea=da(_,0);for(V=0;V<ea.length;V++)$("#salon_cond_list1").tagit("createTag",ea[V]);$("#salon_cond_list2").tagit({placeholderText:"",fieldName:"tags2"});var fa=da(_,1);for(V=0;V<fa.length;V++)$("#salon_cond_list2").tagit("createTag",fa[V]);$("#salon_regist_button").on("click",function(){var a="",b=document.getElementsByName("tags"),c=document.getElementsByName("tags2"),d="";for(p=0;p<b.length;p++)-1!=u(b[p].value)&&(0==d.length?d=u(b[p].value):d+=","+u(b[p].value));for(q=0;q<c.length;q++)-1!=u(c[q].value)&&(0==d.length?d=u(c[q].value):d+=","+u(c[q].value));if(a=d,""!=J.state.t_hairSalonMaster_pass){if(J.state.t_hairSalonMaster_pass!=K.state.t_hairSalonMaster_confirm)return void alert("密码:两次输入的密码不一致");if(J.state.t_hairSalonMaster_pass.length<6||J.state.t_hairSalonMaster_pass.length>20)return void alert("密码:密码请填写6～20字")}var e={t_hairSalonMaster_salonId:L.t_hairSalonMaster_salonId,t_hairSalonMaster_name:v.state.t_hairSalonMaster_salon_name,t_area_id:x.state.t_area_id,t_hairSalonMaster_detailText:y.state.t_hairSalonMaster_detailText,t_hairSalonMaster_openTime:z.state.t_hairSalonMaster_openTime,t_hairSalonMaster_closeTime:A.state.t_hairSalonMaster_closeTime,t_hairSalonMaster_closeDay:B.state.t_hairSalonMaster_closeDay,t_hairSalonMaster_creditAvailable:C.state.t_hairSalonMaster_creditAvailable,t_hairSalonMaster_carParkAvailable:D.state.t_hairSalonMaster_carParkAvailable,t_hairSalonMaster_salonImagePath:F.state.t_hairSalonMaster_salonImagePath.join(","),t_hairSalonMaster_japaneseAvailable:E.state.t_hairSalonMaster_japaneseAvailable,t_hairSalonMaster_searchConditionId:a,t_hairSalonMaster_mail:I.state.t_hairSalonMaster_mail,t_hairSalonMaster_pass:J.state.t_hairSalonMaster_pass};sanitaize.encode(e);var f=setSalonInfo(e);"true"==f.result?(alert("Regist Success"),window.location.reload()):alert("Regist Failed")}),$("#salon_image").change(function(){if($(this).prop("files")[0]){var a=new FormData($("#update")[0]);!function(a){$.ajax({type:"POST",url:API_PATH+"uploadImage",async:!0,processData:!1,data:a,dataType:"text",contentType:!1}).then(function(a){if(console.log("salon-image:"+a),a=JSON.parse(a),"true"==a.result){var b=new Array(a.image_path),c=F.state.t_hairSalonMaster_salonImagePath;b=b.concat(c).slice(0,4),F.setState({t_hairSalonMaster_salonImagePath:b})}else alert("Upload Failed")})}(a)}}),$(".salon_image_trash_button").on("click",function(){var a=$(".salon_image_trash_button").index(this),b=F.state.t_hairSalonMaster_salonImagePath,c="";for(b[a]="img/notfound.jpg",V=a;3>V;V++)c=b[V],b[V]=b[V+1],b[V+1]=c;F.setState({t_hairSalonMaster_salonImagePath:b})})});