$(function(){var a=React.createClass({displayName:"SalonName",getInitialState:function(){return{t_hairSalonMaster_salon_name:""}},changeText:function(a){this.setState({t_hairSalonMaster_salon_name:a.target.value})},render:function(){return React.createElement("div",null,React.createElement("input",{type:"text",value:this.state.t_hairSalonMaster_salon_name,onChange:this.changeText}))}}),b=React.createClass({displayName:"SalonCountry",getDefaultProps:function(){return{area:[""]}},getInitialState:function(){return{t_area_name:""}},onChangeSelectValue:function(a){var b=getSlaveAreasByAreaName(L.area,a.target.value);w.setProps({area:b}),w.setState({t_area_id:getAreaIdByAreaName(a.target.value,b)}),this.setState({t_area_name:a.target.value})},render:function(){var a=this.props.area.map(function(a){return React.createElement("option",{value:a.area_name},a.area_name)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_area_name,onChange:this.onChangeSelectValue},a))}}),c=React.createClass({displayName:"SalonArea",getDefaultProps:function(){return{area:[""]}},getInitialState:function(){return{t_area_id:""}},onChangeSelectValue:function(a){this.setState({t_area_id:a.target.value})},render:function(){var a=this.props.area.map(function(a){return React.createElement("option",{value:a.t_area_id},a.t_area_name)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_area_id,onChange:this.onChangeSelectValue},a))}}),d=React.createClass({displayName:"SalonDetailText",getInitialState:function(){return{t_hairSalonMaster_detailText:""}},onChangeText:function(a){this.setState({t_hairSalonMaster_detailText:a.target.value})},onClick:function(){this.setState({t_hairSalonMaster_detailText:this.refs.textArea.getDOMNode().value})},render:function(){return React.createElement("div",null,React.createElement("div",null,React.createElement("textarea",{value:this.state.t_hairSalonMaster_detailText,onChange:this.onChangeText})))}}),e=React.createClass({displayName:"SalonOpenTime",getDefaultProps:function(){return{open_time:["09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00"]}},getInitialState:function(){return{t_hairSalonMaster_openTime:this.props.open_time[0]}},onChangeSelectValue:function(a){this.setState({t_hairSalonMaster_openTime:a.target.value})},render:function(){var a=this.props.open_time.map(function(a){return React.createElement("option",{value:a},a)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_openTime,onChange:this.onChangeSelectValue},a))}}),f=React.createClass({displayName:"SalonCloseTime",getDefaultProps:function(){return{close_time:["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"]}},getInitialState:function(){return{t_hairSalonMaster_closeTime:this.props.close_time[0]}},onChangeSelectValue:function(a){this.setState({t_hairSalonMaster_closeTime:a.target.value})},render:function(){var a=this.props.close_time.map(function(a){return React.createElement("option",{value:a},a)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_closeTime,onChange:this.onChangeSelectValue},a))}}),g=React.createClass({displayName:"SalonCloseDay",getDefaultProps:function(){return{close_day:["星期一","星期二","星期三","星期四","星期五","星期六","星期日","终年无休"]}},getInitialState:function(){return{t_hairSalonMaster_closeDay:"星期一"}},onChangeSelectValue:function(a){this.setState({t_hairSalonMaster_closeDay:a.target.value})},render:function(){var a=this.props.close_day.map(function(a){return React.createElement("option",{value:a},a)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_closeDay,onChange:this.onChangeSelectValue},a))}}),h=React.createClass({displayName:"SalonCreditAvailable",getDefaultProps:function(){return{credit:[{value:0,text:"信用卡不可用"},{value:1,text:"信用卡可用"}]}},getInitialState:function(){return{t_hairSalonMaster_creditAvailable:0}},onChangeSelectValue:function(a){this.setState({t_hairSalonMaster_creditAvailable:a.target.value})},render:function(){var a=this.props.credit.map(function(a){return React.createElement("option",{value:a.value},a.text)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_creditAvailable,onChange:this.onChangeSelectValue},a))}}),i=React.createClass({displayName:"SalonCarParkAvailable",getDefaultProps:function(){return{car_park:[{value:0,text:"无"},{value:1,text:"有"}]}},getInitialState:function(){return{t_hairSalonMaster_carParkAvailable:0}},onChangeSelectValue:function(a){this.setState({t_hairSalonMaster_carParkAvailable:a.target.value})},render:function(){var a=this.props.car_park.map(function(a){return React.createElement("option",{value:a.value},a.text)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_carParkAvailable,onChange:this.onChangeSelectValue},a))}}),k=React.createClass({displayName:"SalonImagePath",getInitialState:function(){return{t_hairSalonMaster_salonImagePath:["img/notfound.jpg","img/notfound.jpg","img/notfound.jpg","img/notfound.jpg"]}},render:function(){var a=this.state.t_hairSalonMaster_salonImagePath.map(function(a){return React.createElement("div",{className:"salon_image_path_div"},React.createElement("img",{className:"salon_image_img",src:a}))});return React.createElement("div",null,a)}}),l=React.createClass({displayName:"SalonServiceTag",getDefaultProps:function(){return{service_tag:[""]}},getInitialState:function(){return{t_hairSalonMaster_searchConditionId:""}},onChangeSelectValue:function(a){var b=t(a.target.value),c=document.getElementsByName("tags"),d="";for(p=0;p<c.length;p++)-1!=t(c[p].value)&&(0==d.length?d=t(c[p].value):d+=","+t(c[p].value));Y=d,Y+="",s(Y,b)||(Y.length<=0?Y=b:Y+=","+b),$("#salon_cond_list1").tagit("removeAll");var e=ba(Y,0);for(T=0;T<e.length;T++)$("#salon_cond_list1").tagit("createTag",e[T]);console.log("title1_condId:"+Y),this.setState({t_hairSalonMaster_searchConditionId:Y})},render:function(){var a=this.props.service_tag.map(function(a){return React.createElement("option",{value:a},a)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_searchConditionId,onChange:this.onChangeSelectValue},a))}}),m=React.createClass({displayName:"SalonServiceTag2",getDefaultProps:function(){return{service_tag:[""]}},getInitialState:function(){return{t_hairSalonMaster_searchConditionId:""}},onChangeSelectValue:function(a){var b=t(a.target.value),c=document.getElementsByName("tags2"),d="";for(p=0;p<c.length;p++)-1!=t(c[p].value)&&(0==d.length?d=t(c[p].value):d+=","+t(c[p].value));Y=d,Y+="",s(Y,b)||(Y.length<=0?Y=b:Y+=","+b),$("#salon_cond_list2").tagit("removeAll");var e=ba(Y,1);for(T=0;T<e.length;T++)$("#salon_cond_list2").tagit("createTag",e[T]);this.setState({t_hairSalonMaster_searchConditionId:Y})},render:function(){var a=this.props.service_tag.map(function(a){return React.createElement("option",{value:a},a)});return React.createElement("div",null,React.createElement("select",{value:this.state.t_hairSalonMaster_searchConditionId,onChange:this.onChangeSelectValue},a))}}),n=React.createClass({displayName:"SalonMail",getInitialState:function(){return{t_hairSalonMaster_mail:""}},changeText:function(a){this.setState({t_hairSalonMaster_mail:a.target.value})},render:function(){return React.createElement("div",null,React.createElement("input",{type:"email",placeholder:"【例】youjiandizi-888@meihaiwang.com","class":"input-xxlarge",value:this.state.t_hairSalonMaster_mail,onChange:this.changeText}))}}),o=React.createClass({displayName:"SalonPass",getInitialState:function(){return{t_hairSalonMaster_pass:""}},changeText:function(a){this.setState({t_hairSalonMaster_pass:a.target.value})},render:function(){return React.createElement("div",null,React.createElement("input",{type:"password",placeholder:"请填写6～20字的半角英文或数字","class":"input-xxlarge",value:this.state.t_hairSalonMaster_pass,onChange:this.changeText}))}}),r=React.createClass({displayName:"SalonPassConfirm",getInitialState:function(){return{t_hairSalonMaster_confirm:""}},changeText:function(a){this.setState({t_hairSalonMaster_confirm:a.target.value})},render:function(){return React.createElement("div",null,React.createElement("input",{type:"password",id:"confirm",placeholder:"请在输入一次密码","class":"input-xxlarge",value:this.state.t_hairSalonMaster_confirm,onChange:this.changeText}))}}),s=function(a,b){a+="";var c=a.split(",");for(T=0;T<c.length;T++)if(c[T]==b)return!0;return!1},t=function(a){var b=-1;for(T=0;T<P.length;T++)a==P[T].name&&(b=P[T].id);return b},u=React.render(React.createElement(a,null),document.getElementById("salon_salon_name")),v=React.render(React.createElement(b,null),document.getElementById("salon_country")),w=React.render(React.createElement(c,null),document.getElementById("salon_area")),x=React.render(React.createElement(d,null),document.getElementById("salon_detail_text")),y=React.render(React.createElement(e,null),document.getElementById("salon_open_time")),z=React.render(React.createElement(f,null),document.getElementById("salon_close_time")),A=React.render(React.createElement(g,null),document.getElementById("salon_close_day")),B=React.render(React.createElement(h,null),document.getElementById("salon_credit_available")),C=React.render(React.createElement(i,null),document.getElementById("salon_car_park_available")),D=React.render(React.createElement(k,null),document.getElementById("salon_image_path")),E=React.render(React.createElement(l,null),document.getElementById("salon_cond_tag1")),F=React.render(React.createElement(m,null),document.getElementById("salon_cond_tag2")),G=React.render(React.createElement(n,null),document.getElementById("salon_mail")),H=React.render(React.createElement(o,null),document.getElementById("salon_pass")),I=React.render(React.createElement(r,null),document.getElementById("salon_pass_confirm")),J=getSessionInfo(),K=getSalonInfo(J.t_hairSalonMaster_salonId),L=getCountryAreaList();sanitaize.decode(K),sanitaize.decode(L);var M={t_masterSearchConditionType:"サロン検索条件"};sanitaize.encode(M);var N=getSearchConditionList(M);sanitaize.decode(N);var O=N.titles,P=N.values,Q=new Array,R=new Array;(function(){for(T=0;T<O.length;T++)Q[T]={id:O[T].id,name:O[T].name};for(T=0;T<Q.length;T++){R[T]=new Array;var a=0;for(j=0;j<P.length;j++)Q[T].id==P[j].titleID&&(R[T][a]={id:P[j].id,name:P[j].name},a++)}})();$("#salon_cond_tag_name1").text(Q[0].name),$("#salon_cond_tag_name2").text(Q[1].name),$("#account-name").text(J.t_hairSalonMaster_contactUserName);for(var S=new Array,T=(new Array,0);T<L.area.length;T++){var U=L.area[T].t_area_id,V=L.area[T].t_area_name;S[T]={area_id:U,area_name:V}}""==K.t_area_name&&(K.t_area_name=L.area[0].area_slave[0].t_area_name);var V=getAreaNameBySlaveAreaId(L.area,K.t_hairSalonMaster_areaId),W=getSlaveAreasByAreaName(L.area,V),X=new Array;X=K.t_hairSalonMaster_salonImagePath.split(",");for(var T=X.length;4>T;T++)X[T]="img/notfound.jpg";K.t_hairSalonMaster_salonImagePath=X,u.setState(K),v.setState({t_area_name:V}),v.setProps({area:S}),w.setProps({area:W}),w.setState({t_area_id:K.t_hairSalonMaster_areaId}),x.setState(K),""!=K.t_hairSalonMaster_openTime&&y.setState(K),""!=K.t_hairSalonMaster_closeTime&&z.setState(K),""!=K.t_hairSalonMaster_closeDay&&A.setState(K),""!=K.t_hairSalonMaster_creditAvailable&&B.setState(K),""!=K.t_hairSalonMaster_carParkAvailable&&C.setState(K),D.setState(K),G.setState(K);var Y=K.t_hairSalonMaster_searchConditionId,Z=function(a){var b=[];for(b.push(" "),T=0;T<R[a].length;T++)b.push(R[a][T].name);return b},_=Z(0);E.setProps({service_tag:_});var aa=Z(1);F.setProps({service_tag:aa});var ba=function(a,b){var c=[];a+="";var d=a.split(",");for(T=0;T<d.length;T++)for(j=0;j<P.length;j++)d[T]==P[j].id&&P[j].titleID==Q[b].id&&c.push(P[j].name);return c};$("#salon_cond_list1").tagit({placeholderText:"",fieldName:"tags"});var ca=ba(Y,0);for(T=0;T<ca.length;T++)$("#salon_cond_list1").tagit("createTag",ca[T]);$("#salon_cond_list2").tagit({placeholderText:"",fieldName:"tags2"});var da=ba(Y,1);for(T=0;T<da.length;T++)$("#salon_cond_list2").tagit("createTag",da[T]);$("#salon_regist_button").on("click",function(){var a="",b=document.getElementsByName("tags"),c=document.getElementsByName("tags2"),d="";for(p=0;p<b.length;p++)-1!=t(b[p].value)&&(0==d.length?d=t(b[p].value):d+=","+t(b[p].value));for(q=0;q<c.length;q++)-1!=t(c[q].value)&&(0==d.length?d=t(c[q].value):d+=","+t(c[q].value));if(a=d,""!=H.state.t_hairSalonMaster_pass){if(H.state.t_hairSalonMaster_pass!=I.state.t_hairSalonMaster_confirm)return void alert("密码:两次输入的密码不一致");if(H.state.t_hairSalonMaster_pass.length<6||H.state.t_hairSalonMaster_pass.length>20)return void alert("密码:密码请填写6～20字")}var e={t_hairSalonMaster_salonId:J.t_hairSalonMaster_salonId,t_hairSalonMaster_name:u.state.t_hairSalonMaster_salon_name,t_area_id:w.state.t_area_id,t_hairSalonMaster_detailText:x.state.t_hairSalonMaster_detailText,t_hairSalonMaster_openTime:y.state.t_hairSalonMaster_openTime,t_hairSalonMaster_closeTime:z.state.t_hairSalonMaster_closeTime,t_hairSalonMaster_closeDay:A.state.t_hairSalonMaster_closeDay,t_hairSalonMaster_creditAvailable:B.state.t_hairSalonMaster_creditAvailable,t_hairSalonMaster_carParkAvailable:C.state.t_hairSalonMaster_carParkAvailable,t_hairSalonMaster_salonImagePath:D.state.t_hairSalonMaster_salonImagePath.join(","),t_hairSalonMaster_japaneseAvailable:"0",t_hairSalonMaster_searchConditionId:a,t_hairSalonMaster_mail:G.state.t_hairSalonMaster_mail,t_hairSalonMaster_pass:H.state.t_hairSalonMaster_pass};sanitaize.encode(e);var f=setSalonInfo(e);"true"==f.result?(alert("Regist Success"),window.location.reload()):alert("Regist Failed")}),$("#salon_image").change(function(){if($(this).prop("files")[0]){var a=new FormData($("#update")[0]);!function(a){$.ajax({type:"POST",url:API_PATH+"uploadImage",async:!0,processData:!1,data:a,dataType:"text",contentType:!1}).then(function(a){if(console.log("salon-image:"+a),a=JSON.parse(a),"true"==a.result){var b=new Array(a.image_path),c=D.state.t_hairSalonMaster_salonImagePath;b=b.concat(c).slice(0,4),D.setState({t_hairSalonMaster_salonImagePath:b})}else alert("Upload Failed")})}(a)}}),$(".salon_image_trash_button").on("click",function(){var a=$(".salon_image_trash_button").index(this),b=D.state.t_hairSalonMaster_salonImagePath,c="";for(b[a]="img/notfound.jpg",T=a;3>T;T++)c=b[T],b[T]=b[T+1],b[T+1]=c;D.setState({t_hairSalonMaster_salonImagePath:b})})});