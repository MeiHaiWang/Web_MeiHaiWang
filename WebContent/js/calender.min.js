$(function(){function a(a){for(var b=f.stylist,c=[],d=[],e=0;e<b.length;e++){c[e]=[],d[e]=0;for(var h=0;h<g.length;h++)if(b[e].t_stylist_name==g[h].t_stylist_name){d[e]++;var i=moment(g[h].t_reservation_date),j=moment(g[h].t_reservation_date).add("hours",2);c[e].push({from:"/Date("+i.valueOf()+")/",to:"/Date("+j.valueOf()+")/",label:g[h].t_menu_name,customClass:"ganttRed",dataObj:g[h].t_reservation_id})}if(0==d[e],null!=b[e].t_stylist_restTime&&""!=b[e].t_stylist_restTime){var k=b[e].t_stylist_restTime.substring(0,5),l=b[e].t_stylist_restTime.substring(6,11),m=a.substring(0,11)+k+":00",n=a.substring(0,11)+l+":00";console.log("os:"+m+",oe:"+n),c[e].push({from:moment(m).valueOf(),to:moment(n).valueOf(),label:"休憩",customClass:"",dataObj:""})}}for(var o=[],e=0;e<b.length;e++)o.push({name:"staff"+e,id:e,desc:b[e].t_stylist_name,values:c[e]});var p=function(a){for(var c=-1,d=0;d<b.length;d++)a==b[d].t_stylist_name&&(c=b[d].t_stylist_Id);return c};$(".gantt").gantt({source:o,scale:"hours",navigate:"scroll",maxScale:"days",itemsPerPage:10,months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dow:["日","月","火","水","木","金","土"],onItemClick:function(a){console.log("reservation.html?reservationId="+a),location.href="reservation.html?reservationId="+a},onAddClick:function(a,b){if(void 0!=b){var c=moment(Number(a)),d=c.year()+"/",e=Number(c.month())+1;d+=10>e?"0"+e+"/":e+"/",d+=c.date()<10?"0"+c.date()+" ":c.date()+" ",d+=c.hours()<10?"0"+c.hours()+":":c.hours()+":",d+=c.minutes()<10?"0"+c.minutes()+":":c.minutes()+":",d+=c.seconds()<10?"0"+c.seconds():c.seconds();var f=p(o[b].desc);alert("reservation.html?time="+d+"&stylistId="+f),location.href="reservation.html?time="+d+"&stylistId="+f}},onRender:function(){window.console&&"function"==typeof console.log&&console.log("chart rendered")}})}var b=React.createClass({displayName:"UserFind",getInitialState:function(){return{t_user_term:""}},changeText:function(a){this.setState({t_user_term:a.target.value})},render:function(){return React.createElement("div",null,React.createElement("input",{type:"text",value:this.state.t_user_term,onChange:this.changeText,placeholeder:"名前 or 電話番号"}))}}),c=(React.render(React.createElement(b,null),document.getElementById("react_user_find")),new Date),d=c.getFullYear()+"-";c.getMonth()+1<10&&(d+="0"),d+=c.getMonth()+1+"-",c.getDate()+1<10&&(d+="0"),d+=c.getDate()+" 09:00:00";var e=getSessionInfo(),f=getStaffInfo({t_hairSalonMaster_salonId:e.t_hairSalonMaster_salonId}),g={};reservations=getReservationList({t_reservation_salonId:e.t_hairSalonMaster_salonId,t_reservation_date:d}),g=reservations.reservation_list,console.log("reservationNumber : "+g.length),$("#account-name").text(e.t_hairSalonMaster_contactUserName);var h={},j={},k=0,l=0;for(i=0;i<g.length;i++)0==g[i].t_reservation_isFinished?(h[k]=g[i],k++):g[i].t_reservation_isFinished>0&&(j[l]=g[i],l++);$("#reserve_number").text(k),$("#customer_number").text(l),$("#datepicker").datepicker({onSelect:function(b,c){console.log("put a "+b);var d=moment(b),f=d.year()+"-";d.month()+1<10&&(f+="0"),f+=d.month()+1+"-",d.date()+1<10&&(f+="0"),f+=d.date()+" 09:00:00",console.log(f),reservations=getReservationList({t_reservation_salonId:e.t_hairSalonMaster_salonId,t_reservation_date:f}),g=reservations.reservation_list,a(f)}}),a(d),$("#reservation_list_button").on("click",function(){console.log("reservationlist.html?date="+d),location.href="reservationlist.html?date="+d}),$("#customer_list_button").on("click",function(){console.log("customer.html"),location.href="customer.html"})});