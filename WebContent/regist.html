<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>“美嗨网”注册表格</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="shortcut icon" href="img/favicon.png" >
   <!-- <link href="css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">-->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->    
<style type=text/css> 
/* ContentsArea
-------------------------- */
#contents {
	margin: 0 auto;
	padding: 10px 0 50px 0;
	width: 100%;
}

p {
	padding: 10px 0;
}

#open01,
#open02 {
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	display: none;
	position: absolute;
}

.close_overlay {
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	display: block;
	text-indent: -9999px;
	position: absolute;
	background: #000;
	opacity: 0.5;
	z-index: 5;
}

.modal_window {
	top: 50%;
	left: 50%;
	margin: -150px 0 0 -200px;
	width: 430px;
	height: 320px;
	text-align: center;
	display: block;
	background: #fff;
	position: absolute;
	z-index: 10;
}

.modal_window h2 {
	margin-bottom: 20px;
	width: 430px;
	height: 30px;
	line-height: 30px;
	color: #fff;
	font-size: 12px;
	font-weight: bold;
	text-align: left;
	text-indent: 15px;
	background: pink;
}
.modal_window p {
	padding: 0 15px 15px 15px;
	font-size: 13px;
	line-height: 160%;
	text-align: left;
}


/* CSS3 ModalWindow SET
-------------------------- */
@-webkit-keyframes modalFadeIn {
	0% {opacity:0;display:block;}
	100% {opacity:1;}
}
div#modal div:target {
	-webkit-animation-name: modalFadeIn; 
  	-webkit-animation-duration: 1s;
  	-webkit-animation-iteration-count: 1;
	opacity: 1;
	display:block;
}

</style>
  </head>
  <body>
  <center><img src="img/top.png" width="76%" height="70%"></center>
  <form class="form-horizontal" id="registForm"  method="POST">
  <center>
   <div id="legend">
     <legend class="">想要发布店铺信息的商家，请先填写下列表格</legend>
    </div>
  <fieldset>
    <table border="2" bordercolor="#78bfbe"  width="100%" height="80%">
    <tr>       
 	   <!--<div class="control-group">-->
      	   <!-- Username -->
      	   <td bgcolor="#78bfbe"　align="center" valign="center" height="80%">
      	   <label class="control-label"  for="username"><font color="red">※ </font>您的姓名</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
          <!-- <div class="controls">-->
           	 <input type="text" id="contactUser" name="contactUser" placeholder="【例】王健一" class="input-xxlarge" required>
            	<!--<p class="help-block">【例】王健一</p>-->
           <!--</div>-->
           </td>
     </tr>
    </table>
    <table border="1" bordercolor="#78bfbe"  width="100%" height="80%">
     <tr>       
          　<td bgcolor="#78bfbe"　align="center" valign="center" height="80%">
      	   <label class="control-label"  for="username"><font color="red">※ </font>店铺名</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
            <input type="text" id="salonName" name="salonName" placeholder="店铺名称还未确定的新店铺，请在店铺名中填写【未定】" class="input-xxlarge" required>
            	<!--<p class="help-block">【例】王健一</p>-->
           <!--</div>-->
           </td>
     </tr>
     </table>
    <table border="1" bordercolor="#78bfbe"  width="100%" height="80%">
     <tr>       
          　<td bgcolor="#78bfbe"　align="center" valign="center" height="80%">
      	   <label class="control-label"  for="username"><font color="red">※ </font>城市-地区</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
            <select name="salon_country" id = "salon_country" style="width: 205px" required onchange="parentAreaChangeHandler(this)">
	　</select>
           <select name="salon_area" id ="salon_area" style="width: 205px" required onchange="childAreaChangeHandler(this)">
		<!--  <option value="area1">地域1</option>-->
	　</select>
           </td>
     </tr>
     </table>
    <table border="1" bordercolor="#78bfbe"  width="100%" height="80%">
     <tr>       
          　<td bgcolor="#78bfbe"　align="center" valign="center" height="80%">
      	   <label class="control-label"  for="username"><font color="red">※ </font>地址</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
            <input type="text" id="address" name="address" placeholder="【例】浦区寧海東路160号" class="input-xxlarge" required>
            	<!--<p class="help-block">【例】王健一</p>-->
           <!--</div>-->
           </td>
     </tr>
     </table>

    <table border="1" bordercolor="#78bfbe"  width="100%" height="80%">
     <tr>       
          　<td bgcolor="#78bfbe"　align="center" valign="center" height="80%">
      	   <label class="control-label"  for="username"><font color="red">※ </font>电话号码</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
            <input type="tel" id="tel" name="tel" placeholder="【例】111-1234-1234" class="input-xxlarge" required>
            	<!--<p class="help-block">【例】王健一</p>-->
           <!--</div>-->
           </td>
     </tr>
     </table>
   
    <table border="1" bordercolor="#78bfbe"  width="100%" height="80%">
     <tr>       
          　<td bgcolor="#78bfbe"　align="center" valign="center" height="80%">
      	   <label class="control-label"  for="username"><font color="red">※ </font>电子邮件</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
            <input type="email" id="mail" name="mail" placeholder="【例】youjiandizi-888@meihaiwang.com" class="input-xxlarge" required>
            	<!--<p class="help-block">【例】王健一</p>-->
           <!--</div>-->
           </td>
     </tr>
     </table>
     
      <table border="1" bordercolor="#78bfbe"  width="100%" height="80%">
     <tr>       
          　<td bgcolor="#78bfbe"　align="center" valign="center" height="80%">
      	   <label class="control-label"  for="username"><font color="red">※ </font>密码</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
            <input type="password" id="pass" name="pass" placeholder="请填写6～20字的半角英文或数字" class="input-xxlarge" required>
            	<!--<p class="help-block">【例】王健一</p>-->
           <!--</div>-->
           </td>
     </tr>
     </table>

      <table border="1" bordercolor="#78bfbe"  width="100%" height="80%">
     <tr>       
          　<td bgcolor="#78bfbe"　align="center" valign="center" height="80%">
      	   <label class="control-label"  for="username"><font color="red">※ </font>密码</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
            <input type="password" id="passConfirm" name="passConfirm" placeholder="请在输入一次密码" class="input-xxlarge" required>
            	<!--<p class="help-block">【例】王健一</p>-->
           <!--</div>-->
           </td>
     </tr>
     </table>
<br>
     <center>
              <textarea id="rule" name="rule" cols="300" rows="7"   placeholder="利用規約" style="border:solid 1px #78bfbe;overflow-y:visible;">　　　　　　　　　　　　　美嗨网商户服务协议
在接受本协议之前，请您仔细阅读本协议的全部内容（特别是以粗体下划线标注的内容）。如果您对本协议的条款有疑问的，请通过美嗨客服渠道进行询问，美嗨网将向您解释条款内容。如果您不同意本协议的任意内容，或者无法准确理解美嗨网对条款的解释，请不要同意本协议或使用本协议项下的服务，否则，表示您已接受了以下所述的条款和条件，同意受本协议约束。届时您不应以未阅读本协议的内容或者未获得美嗨网对您问询的解答等理由，主张本协议无效，或要求撤销本协议。
第一条 签约背景
为更好的为美嗨网商户提供服务,同时为更好的规范商户认领现有商户信息（包括新发布商户信息）、发布与商户相关的内容信息、推广信息行为，以及更好的使用美嗨网提供的基于商户中心的其他服务，特签署本协议。
第二条 签约主体
本协议由天津市汤姆索亚网络有限公司（本协议中称“美嗨网”）与通过认领现有商户信息（包括新发布商户信息）使用美嗨网商户中心服务功能的商家用户签署。
第三条 协议订立、生效及其适用范围
3.1 您通过网络页面点击确认本协议或以书面签约等其他方式接受本协议，包括但不限于未确认本协议而使用了美嗨网商户中心服务功能，均表示您与美嗨网已就本协议达成一致并同意接受本协议的全部约定内容。
3.2 本协议自您确认本协议之时即生效。对未确认本协议的商户，如事实上已在使用美嗨网商户中心之服务或履行本协议，则本协议在您的事实行为发生之时生效。
3.3 本协议包括本协议正文，以及所有美嗨网已经发布的或将来可能发布的关于商户服务的各类规则、规范、公告和（或）通知等（以下合称“规则”）。所有规则为本协议不可分割的组成部分，与协议正文具有同等法律效力。
3.4 美嗨网可按自身判断随时对本协议进行修改及更新。对本协议的所有改动一经发布即产生法律效力，并适用于改动发布后对本网站的一切访问和使用行为。如商户在修改后的本协议发布后继续使用本商户服务的，即代表商户接受并同意了这些改动。
3.5 您了解并同意，根据您实施的不同行为，您将受到本协议不同条款的约束。
第四条 定义
4.1 美嗨网:由天津市汤姆索亚网络公司拥有并运营,网址为www.meihaiwang.com的网站。
4.2 商户信息：由美嗨网用户、商户发布的商户基本信息，包括但不限于商户名称、地址、联系方式等。
4.3 商户认领：指商户主张现有商户信息对应的实体商户为其所经营管理，或将其经营管理的实体商户在美嗨网发布新的商户信息，从而取得该商户信息一定的管理权限并使用该商户信息商户中心服务功能的行为。
4.4 商户：通过商户认领功能取得该商户信息一定的管理权限并使用该商户信息商户中心服务功能的实体商户的经营管理者。
第五条 商户服务的内容及功能
美嗨网通过商户中心后台管理系统为商户提供基础服务（包括商户信息编辑、维护、用户点评回应等）。商户接受除商户中心基础服务之外的推广技术服务时，应当与美嗨网（或具体服务提供商）以书面的方式另行签订服务协议以明确双方的具体权利义务。
第六条 商户陈述与保证
6.1 商户承诺其是其认领商户信息对应的实体商户的真实经营管理者；
6.2 商户承诺其是其发布新的商户信息对应的实体商户的真实经营管理者；
6.3 商户承诺其在商户认领环节向美嗨网提交的证明材料合法、真实、准确详尽。否则商户承诺独立承担因此导致的相应责任及后果，使美嗨网免责；
6.4 商户承诺其通过商户中心发布、编辑、更新的商户信息（包括但不限于文字、图片等）真实准确，并且不侵犯任何人的合法权益；
6.5 商户承诺在其接受除商户中心基础服务之外的推广技术服务时，严格遵守相关服务协议的相关约定；
6.6 商户同意在使用美嗨网商户服务的同时接受美嗨网向其登记的电子邮件、手机、通信地址发送商业信息。
6.7 商户承诺维护点评内容的客观、真实性，不得进行违反诚信的任何行为，包括但不限于：炒作商户，参与或组织撰写及发布虚假点评、以利益诱惑、威胁等手段要求第三人发布虚假点评内容、进行其他其它影响点评真实性、客观性、干扰扰乱网站正常秩序的违规行为等，以上炒作商户、虚假点评行为不限于对商户自己的炒作，也包括炒作其他商户、对其他商户进行虚假点评等不正当竞争行为。
第七条 美嗨网的权利及责任限制
7.1 美嗨网致力于不断提高商户服务的产品与技术质量、优质的用户体验以及系统的安全稳定；
7.2 在任何情况下，美嗨网均不对源于、基于或因本协议或使用商户服务而导致的数据丢失和/或任何损害赔偿负责，包括但不限于直接的、间接的、特殊的、附带性的或惩罚性的损害赔偿或其他任何形式的损害赔偿，即使美嗨网已被告知此等损害赔偿的可能性。
7.3 美嗨网对商户的任何通知，不论是口头还是书面的，均不表示美嗨网做出在本协议陈述以外的任何担保责任。
7.4 对下列情形，美嗨网不承担任何责任：
（1）并非美嗨网的故意或过失而导致软件无法使用。
（2）由于商户或第三人的故意或过失导致其及/或任何第三方遭受损失。
（3）因美嗨网合理控制范围以外的原因，包括但不限于不可抗力、政府行为和电力电信中断等，导致美嗨网未能履行或未能完全履行本合同的。
7.5 美嗨网保留随时修改或中断服务而不需通知商户的权利，不需对商户或任何无直接关系的第三方负责。
7.6 如商户违反本协议第六条约定的承诺及保证，美嗨网有权采取一切必要的措施，包括但不限于：删除商户发布的内容、暂停或查封商户帐号，取消因违规所获利益，终止本服务协议，乃至通过诉讼形式追究商户法律责任等。
7.7 美嗨网内所有用户所发表的用户点评，仅代表用户个人观点，并不表示本网站赞同其观点或证实其描述，本网站不承担用户点评引发的任何法律责任。
第八条 知识产权及其它权利
任何商户接受本协议，即表明该商户主动将其在任何时间段在本站发表的任何形式的信息的著作财产权，包括并不限于：复制权、发行权、出租权、展览权、表演权、放映权、广播权、信息网络传播权、摄制权、改编权、翻译权、汇编权等，以及应当由著作权人享有的其他权利都归商家所有，对任何第三方提起侵犯著作权的纠纷，美嗨网不承担一切责任。
第九条 适用法律与争议解决
9.1 因商户使用美嗨网站商户服务而引起或与之相关的一切争议均应依照中华人民共和国法律予以处理，并以美嗨网所在地人民法院为第一审管辖法院。
9.2 如本协议的任何条款被视作无效或无法执行，则上述条款可被分离，其余部份则仍具有法律效力
</textarea>
    </center>
   <br>
   <center>
 <!--   <div class="control-group">-->
      <!-- Button -->
      <!--<div class="controls">-->
        <button type="submit"  id="button" style="WIDTH: 500px; HEIGHT: 50px;background-color:#f061af;border:none;border-radius:10px;box-shadow:4px 4px #555;" onclick="regist(this)">
        <font size="5" color="white">同意公开您的店铺信息</font>
        </button>
    <!--  </div>-->
    <!--</div>-->
   </center>
   </fieldset>
</form>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <!-- The Loader. Is shown when pjax happens -->
<div class="loader-wrap hiding hide">
    <i class="fa fa-circle-o-notch fa-spin-fast"></i>
</div>
<section>
<div id="contents">
<div id="modal">
<div id="open01">
<a href="#" class="close_overlay">×</a>
<span class="modal_window">
<h2>“美嗨网”注册申请完成</h2>
<p>店铺注册申请已经完成。<br>工作人员会在3个工作日内，通过您注册的邮件地址或电话与您联系。<br>
请耐心等待。</p>
<img src="img/logo.png" width="70%" height="70%" >
<br>
<a href="#">【×】关闭</a>
</span><!--/.modal_window-->
</div><!--/#open01-->
</div><!--/#modal-->

</div><!--/#contents-->
</section>

<!-- common libraries. required for every page-->
<script src="vendor/jquery/dist/jquery.min.js"></script>
<script src="vendor/jquery-pjax/jquery.pjax.js"></script>
<script src="vendor/bootstrap-sass/assets/javascripts/bootstrap/transition.js"></script>
<script src="vendor/bootstrap-sass/assets/javascripts/bootstrap/collapse.js"></script>
<script src="vendor/bootstrap-sass/assets/javascripts/bootstrap/dropdown.js"></script>
<script src="vendor/bootstrap-sass/assets/javascripts/bootstrap/button.js"></script>
<script src="vendor/bootstrap-sass/assets/javascripts/bootstrap/tooltip.js"></script>
<script src="vendor/bootstrap-sass/assets/javascripts/bootstrap/alert.js"></script>
<script src="vendor/slimScroll/jquery.slimscroll.min.js"></script>
<script src="vendor/widgster/widgster.js"></script>
<script src="vendor/pace.js/pace.min.js"></script>
<script src="vendor/jquery-touchswipe/jquery.touchSwipe.js"></script>
<script src="vendor/jquery-touchswipe/jquery.touchSwipe.js"></script>

<script src="js/bootstrap.min.js"></script>
<script src="js/config.js"></script>
  <script src="js/common.min.js"></script>
<!--  <script src="js/app.min.js"></script>-->

<!-- common app js -->
<script src="js/settings.js"></script>
<script src="js/app.js"></script>
<!-- react -->
<script src="js/react.min.js"></script>
<script src="js/JSXTransformer.js"></script>
<script type="text/javascript">
  　   var country_area_info;
	   var areas = new Array();
	   var areas_slave;
       var parentArea = new Array();
       var childArea = new Array();
    	   
	   function parentAreaChangeHandler(s){
		    var component_salon_area = document.getElementById('salon_area');
		    var options = component_salon_area.options;
		    
		    for (var i = options.length - 1; 0 <= i; --i) {
		    	if(!options[i].selected) {
		    		component_salon_area.removeChild(options[i]);
		    	}
		    }
		    
		    //親のエリアIDを抽出
	 	     parentArea = new Array();
	 	     for (var i = 0; i < country_area_info.area.length; i++) {
	 	 	      if(country_area_info.area[i].t_area_name == s.value ){
	 	 	    	parentArea.push(country_area_info.area[i].t_area_id);
	 	 	    	break;
	 	 	      }
	 	     }
		    
	 	    areas_slave = getSlaveAreasByAreaName(country_area_info.area, s.value);
	 	    childArea = new Array();
		    childArea.push(areas_slave[0].t_area_id);
			for(var i=0; i< areas_slave.length; i++){
				component_salon_area.options[i] = new Option(areas_slave[i].t_area_name);
				//registArea.push(areas_slave[i].t_area_id);
			}
       }

	   function childAreaChangeHandler(s){
		    childArea = new Array();
	 		// areaを参照しやすい形に変換
			for(var i=0; i< areas_slave.length; i++){
				if(areas_slave[i].t_area_name == s.value){
					childArea.push(areas_slave[i].t_area_id);
					break;
				}
			}		   
       }	   
 	   function regist(event) {
 			if(contactUser.value =="" || salonName.value =="" || parentArea[0] =="" || childArea[0]=="" || address.value=="" || tel.value=="" || mail.value=="" || pass.value==""){
 	 			return;
 	 		}
 		    // エラーメッセージをクリアする
 		    registForm.pass.setCustomValidity("");
 		    // パスワードの一致確認
 		    if (registForm.pass.value != registForm.passConfirm.value) {
 		      // 一致していなかったら、エラーメッセージを表示する
 		      registForm.pass.setCustomValidity("两次输入的密码不一致");
 		      return;
 		    }   
 		    if(registForm.pass.value.length < 6　 || registForm.pass.value.length > 20){
 		    	 registForm.pass.setCustomValidity("密码请填写6～20字");
 		    	 return;
 		    }
 
 		var response =　$.ajax({
  				url: API_PATH + "registSalon",
  				type: "POST",
  				async: false,
  				dataType: "text",
  				data:{
  				  userName : contactUser.value,
  				  salonName : salonName.value,
  				//parentArea : parentArea[0],
  				  childArea :  childArea[0],
  				  address : address.value,
  				  tel : tel.value,
  				  mail : mail.value,
  				  pass : pass.value,
  				},
  			    success: function(data, status) {
  			    	location.href = "#top";
  			    }
  		}).responseText;
 		
 		location.href = "#open01";
 	   }
 	   function load(){
 
 		 var component_salon_country = document.getElementById('salon_country');
 		 var component_salon_area = document.getElementById('salon_area');
 		
 		 var response =　$.ajax({
 				url: API_PATH + "getCountryAreaList",
 				type: "POST",
 				async: false,
 				dataType: "text",
 		}).responseText;
 		
 		country_area_info = JSON.parse(response);
 		sanitaize.decode(country_area_info);
 		  
 		  var country_area_id_info = new Array();
 		  for (var i = 0; i < country_area_info.area.length; i++) {
 		  	var area_id = country_area_info.area[i].t_area_id;
 		  	var area_name = country_area_info.area[i].t_area_name;
 		  	areas[i] = {area_id: area_id, area_name: area_name};
 		  	component_salon_country.options[i]　=new Option(area_name);
 		 	// component_salon_area.options[i] = new Option():
 		  }
 		  // areaを参照しやすい形に変換
 		  var area_name = getAreaNameBySlaveAreaName(country_area_info.area, country_area_info.area[0].area_slave[0].t_area_name);
 		  areas_slave = getSlaveAreasByAreaName(country_area_info.area, area_name);
		  for(var i=0; i< areas_slave.length; i++){
			  component_salon_area.options[i] = new Option(areas_slave[i].t_area_name);
		  }
 		  //ページロード時は初期選択の地域のIDをいれておく
 		  parentArea.push(country_area_info.area[0].t_area_id);
 		  childArea.push(areas_slave[0].t_area_id);
 	   }
 	   load();
       
</script>
<center>
<footer>
<p>Copyright 2015 Tomsawyer`s Co.,Ltd</p>
</footer>
</center>
  </body>
</html>
