<!DOCTYPE html>
<html lang="ch">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>HMWサロン登録フォーム</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="shortcut icon" href="img/favicon.png" >
   <!-- <link href="css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">-->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->    
<style type=text/css> 
/* ContentsArea
-------------------------- */
#contents {
	margin: 0 auto;
	padding: 10px 0 50px 0;
	width: 100%;
}

p {
	padding: 10px 0;
}

#open01,
#open02 {
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	display: none;
	position: absolute;
}

.close_overlay {
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	display: block;
	text-indent: -9999px;
	position: absolute;
	background: #000;
	opacity: 0.5;
	z-index: 5;
}

.modal_window {
	top: 50%;
	left: 50%;
	margin: -150px 0 0 -200px;
	width: 400px;
	height: 300px;
	text-align: center;
	display: block;
	background: #fff;
	position: absolute;
	z-index: 10;
}

.modal_window h2 {
	margin-bottom: 20px;
	width: 400px;
	height: 30px;
	line-height: 30px;
	color: #fff;
	font-size: 12px;
	font-weight: bold;
	text-align: left;
	text-indent: 15px;
	background: pink;
}
.modal_window p {
	padding: 0 15px 15px 15px;
	font-size: 13px;
	line-height: 160%;
	text-align: left;
}


/* CSS3 ModalWindow SET
-------------------------- */
@-webkit-keyframes modalFadeIn {
	0% {opacity:0;display:block;}
	100% {opacity:1;}
}
div#modal div:target {
	-webkit-animation-name: modalFadeIn; 
  	-webkit-animation-duration: 1s;
  	-webkit-animation-iteration-count: 1;
	opacity: 1;
	display:block;
}

</style>
  </head>
  <body>
  <section>
<div id="contents">
<div id="modal">
<div id="open01">
<a href="#" class="close_overlay">×</a>
<span class="modal_window">
<h2>MHWサロン登録申請完了</h2>
<p>MHWサロン登録申請を受け付けました。<br>登録して頂いたメールアドレスに追ってご連絡を致しますので暫くお待ち下さい。</p>
<img src="img/logo.png" width="70%" height="70%" >
<br>
<a href="#">【×】CLOSE</a>
</span><!--/.modal_window-->
</div><!--/#open01-->
</div><!--/#modal-->

</div><!--/#contents-->
</section>
  
  <form class="form-horizontal" id="registForm"  method="POST">
  <center><img src="img/top.png" width="100%" height="50%"></center>
  <fieldset>
   
   <br>
    <div id="legend">
     <legend class="">店舗掲載ご希望の方は<br>こちらの入力フォームからお問い合わせください</legend>
    </div>
    <table border="1" bordercolor="#78bfbe"  width="100%" height="100%">
    <tr>       
 	   <!--<div class="control-group">-->
      	   <!-- Username -->
      	   <td bgcolor="#78bfbe"　align="center" valign="center" height="55">
      	   <label class="control-label"  for="username"><font color="red">※ </font>連絡者名</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
          <!-- <div class="controls">-->
           	 <input type="text" id="contactUser" name="contactUser" placeholder="【例】王健一" class="input-xxlarge" required>
            	<!--<p class="help-block">【例】王健一</p>-->
           <!--</div>-->
           </td>
          </div>
     </tr>
    </table>
    <table border="1" bordercolor="#78bfbe"  width="100%" height="100%">
     <tr>       
          　<td bgcolor="#78bfbe"　align="center" valign="center" height="55">
      	   <label class="control-label"  for="username"><font color="red">※ </font>サロン名</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
            <input type="text" id="salonName" name="salonName" placeholder="＊新規オープンで未定の場合は「未定」とご入力下さい" class="input-xxlarge" required>
            	<!--<p class="help-block">【例】王健一</p>-->
           <!--</div>-->
           </td>
     </tr>
     </table>

    <table border="1" bordercolor="#78bfbe"  width="100%" height="100%">
     <tr>       
          　<td bgcolor="#78bfbe"　align="center" valign="center" height="55">
      	   <label class="control-label"  for="username"><font color="red">※ </font>都市-地域</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
            <select name="salon_country" id = "salon_country" style="width: 205px" required onchange="parentAreaChangeHandler(this)">
	　</select>
           <select name="salon_area" id ="salon_area" style="width: 205px" required onchange="childAreaChangeHandler(this)">
		<!--  <option value="area1">地域1</option>-->
	　</select>
           </td>
     </tr>
     </table>
    <table border="1" bordercolor="#78bfbe"  width="100%" height="100%">
     <tr>       
          　<td bgcolor="#78bfbe"　align="center" valign="center" height="55">
      	   <label class="control-label"  for="username"><font color="red">※ </font>住所</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
            <input type="text" id="address" name="address" placeholder="【例】浦区寧海東路160号" class="input-xxlarge" required>
            	<!--<p class="help-block">【例】王健一</p>-->
           <!--</div>-->
           </td>
     </tr>
     </table>

    <table border="1" bordercolor="#78bfbe"  width="100%" height="100%">
     <tr>       
          　<td bgcolor="#78bfbe"　align="center" valign="center" height="55">
      	   <label class="control-label"  for="username"><font color="red">※ </font>連絡先</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
            <input type="tel" id="tel" name="tel" placeholder="【例】111-1234-1234" class="input-xxlarge" required>
            	<!--<p class="help-block">【例】王健一</p>-->
           <!--</div>-->
           </td>
     </tr>
     </table>
   
    <table border="1" bordercolor="#78bfbe"  width="100%" height="100%">
     <tr>       
          　<td bgcolor="#78bfbe"　align="center" valign="center" height="55">
      	   <label class="control-label"  for="username"><font color="red">※ </font>メールアドレス</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
            <input type="email" id="mail" name="mail" placeholder="【例】youjiandizi-888@meihaiwang.com" class="input-xxlarge" required>
            	<!--<p class="help-block">【例】王健一</p>-->
           <!--</div>-->
           </td>
     </tr>
     </table>
     
      <table border="1" bordercolor="#78bfbe"  width="100%" height="100%">
     <tr>       
          　<td bgcolor="#78bfbe"　align="center" valign="center" height="55">
      	   <label class="control-label"  for="username"><font color="red">※ </font>パスワード</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
            <input type="password" id="pass" name="pass" placeholder="半角英数字記号で6文字以上20文字以内でご入力ください" class="input-xxlarge" required>
            	<!--<p class="help-block">【例】王健一</p>-->
           <!--</div>-->
           </td>
     </tr>
     </table>
     
   
     

      <table border="1" bordercolor="#78bfbe"  width="100%" height="100%">
     <tr>       
          　<td bgcolor="#78bfbe"　align="center" valign="center" height="55">
      	   <label class="control-label"  for="username"><font color="red">※ </font>パスワード(確認用)</label>
      	   </td>
      	   <td bgcolor="#ffffff" align="center" valign="center">
            <input type="password" id="passConfirm" name="passConfirm" placeholder="パスワードを再度入力してください" class="input-xxlarge" required>
            	<!--<p class="help-block">【例】王健一</p>-->
           <!--</div>-->
           </td>
     </tr>
     </table>
<br>
     <center>
              <textarea id="rule" name="rule" cols="300" rows="8"   placeholder="利用規約" style="border:solid 1px #78bfbe;overflow-y:visible;">　　　　　　　　　　　　　　会员服务条款

美嗨网会员注册是免费服务，您必须完全同意下列所有服务条款并完成注册，才能享受相关服务。

总则
1.1 美嗨网是由天津市汤姆索亚网络有限公司创建、运行的美容美发信息网站。
1.2 美嗨网用户是指完成全部注册流程，愿意接受美嗨网会员服务条款并在美嗨网相关使用规范的规定下使用美嗨网服务的注册用户。
1.3 美嗨网会员服务是美嗨网为美嗨网用户提供的无偿服务，用户美嗨网注册后，方可享受专门为会员提供的各项服务。

服务内容：
2.1 美嗨网将为会员提供多种专有的会员服务。
2.2 美嗨网有权根据实际情况随时调整服务内容。
服务的开通和终止：
2.3 美嗨网用户完成相关资料的填写，即可成为美嗨网会员。用户应如实填写相关资料，因填写资料虚伪而造成的后果，美嗨网不承担任何责任。
2.4 所有美嗨网会员必须完成会员注册程序并同意本条款的全部内容。
会员的权利和义务：
2.5 会员应确保注册资料的真实性。如因注册信息不真实而引起的问题所带来的后果及责任，由用户自行承担。
2.6 会员平等享有美嗨网会员的权利，同时应遵守美嗨网的各项管理方案，包括但不限于美嗨网用户服务协议。
2.7 会员可优先参加由美嗨网组织的活动并享受对应的优惠及服务。
2.8 会员有权利不参加美嗨网组织的任何活动。
2.9 会员在会员有效期内可主动终止或取消会员资格。
2.10 会员自行承担在美嗨网中发布、传播信息的法律责任，会员使用美嗨网服务，均应遵守中华人民共和国的各项法律法规，保证上传信息不侵犯著作权等任何第三方权利。

美嗨网的权利和义务：
3.1 美嗨网有义务保证会员服务的顺畅，当出现技术故障导致会员服务提供有碍时，美嗨网应尽快排除故障。
3.2 美嗨网在未经会员授权时不得公开、编辑或透露会员注册及保存的非公开内容。法律规定的情形除外。
3.3 美嗨网通过美嗨网系统通知、短信通知、邮箱通知等多种方式对会员进行通知和公告。
3.4 因不可抗力造成会员服务的中断或其它缺陷，美嗨网不承担任何责任，但将尽力减少因此给会员造成的损失和影响。
3.5 因用户原因造成美嗨网账号密码泄露，美嗨网不承担责任，同时为避免美嗨网账号被盗用后滥用而引起法律风险，美嗨网有权在知悉该情形后采取一切措施避免第三方对用户的会员帐号实施操作行为，而不论其基于何种目的、获取方式是否善意合法。
3.6 若会员在使用美嗨网服务或美嗨网会员服务的过程中，故意进行有损美嗨网、美嗨网用户或会员合法权益的行为，美嗨网有权取消该会员的会员资格而无需给予任何补偿，并保留进一步追究该行为法律责任的权利。
3.7 若会员在使用美嗨网服务或美嗨网会员服务的过程中，存在触犯中华人民共和国法律法规的行为，美嗨网有权取消该会员的会员资格而无须给与任何补偿，行为人须自行承担全部责任。

其他：
4.1 本服务条款的解释，效力及纠纷的解决，适用于中华人民共和国大陆法律。
4.2　对会员在使用美嗨网的过程中造成的与任何第三方之间的纠纷，美嗨网不承担任何责任。
4.3 美嗨网可依照美嗨网发展的不同阶段，随着美嗨网站管理经验的不断丰富，出于维护美嗨会员秩序的目的，不断完善本条款。</textarea>
    </center>


   <br>
   <center>
 <!--   <div class="control-group">-->
      <!-- Button -->
      <!--<div class="controls">-->
        <button type="submit"  id="button" style="WIDTH: 515px; HEIGHT: 70px;background-color:#f061af;border:none;border-radius:10px;box-shadow:4px 4px #555;" onclick="regist(this)">
        <font size="5" color="white">同意して掲載希望する</font>
        </button>
    <!--  </div>-->
    <!--</div>-->
   </center>
   </fieldset>
</form>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <!-- The Loader. Is shown when pjax happens -->
<div class="loader-wrap hiding hide">
    <i class="fa fa-circle-o-notch fa-spin-fast"></i>
</div>



<!-- common libraries. required for every page-->
<script src="vendor/jquery/dist/jquery.min.js"></script>
<script src="vendor/jquery-pjax/jquery.pjax.js"></script>
<script src="vendor/bootstrap-sass/assets/javascripts/bootstrap/transition.js"></script>
<script src="vendor/bootstrap-sass/assets/javascripts/bootstrap/collapse.js"></script>
<script src="vendor/bootstrap-sass/assets/javascripts/bootstrap/dropdown.js"></script>
<script src="vendor/bootstrap-sass/assets/javascripts/bootstrap/button.js"></script>
<script src="vendor/bootstrap-sass/assets/javascripts/bootstrap/tooltip.js"></script>
<script src="vendor/bootstrap-sass/assets/javascripts/bootstrap/alert.js"></script>
<script src="vendor/slimScroll/jquery.slimscroll.min.js"></script>
<script src="vendor/widgster/widgster.js"></script>
<script src="vendor/pace.js/pace.min.js"></script>
<script src="vendor/jquery-touchswipe/jquery.touchSwipe.js"></script>
<script src="vendor/jquery-touchswipe/jquery.touchSwipe.js"></script>

<script src="js/bootstrap.min.js"></script>
<script src="js/config.js"></script>
  <script src="js/common.min.js"></script>
<!--  <script src="js/app.min.js"></script>-->

<!-- common app js -->
<script src="js/settings.js"></script>
<script src="js/app.js"></script>
<!-- react -->
<script src="js/react.min.js"></script>
<script src="js/JSXTransformer.js"></script>
<script type="text/javascript">
  　   var country_area_info;
	   var areas = new Array();
	   var areas_slave;
       var parentArea = new Array();
       var childArea = new Array();
    	   
	   function parentAreaChangeHandler(s){
		    var component_salon_area = document.getElementById('salon_area');
		    var options = component_salon_area.options;
		    
		    for (var i = options.length - 1; 0 <= i; --i) {
		    	if(!options[i].selected) {
		    		component_salon_area.removeChild(options[i]);
		    	}
		    }
		    
		    //親のエリアIDを抽出
	 	     parentArea = new Array();
	 	     for (var i = 0; i < country_area_info.area.length; i++) {
	 	 	      if(country_area_info.area[i].t_area_name == s.value ){
	 	 	    	parentArea.push(country_area_info.area[i].t_area_id);
	 	 	    	break;
	 	 	      }
	 	     }
		    
	 	    areas_slave = getSlaveAreasByAreaName(country_area_info.area, s.value);
	 	    childArea = new Array();
		    childArea.push(areas_slave[0].t_area_id);
			for(var i=0; i< areas_slave.length; i++){
				component_salon_area.options[i] = new Option(areas_slave[i].t_area_name);
				//registArea.push(areas_slave[i].t_area_id);
			}
       }

	   function childAreaChangeHandler(s){
		    childArea = new Array();
	 		// areaを参照しやすい形に変換
			for(var i=0; i< areas_slave.length; i++){
				if(areas_slave[i].t_area_name == s.value){
					childArea.push(areas_slave[i].t_area_id);
					break;
				}
			}		   
       }	   
 	   function regist(event) {
 			if(contactUser.value =="" || salonName.value =="" || parentArea[0] =="" || childArea[0]=="" || address.value=="" || tel.value=="" || mail.value=="" || pass.value==""){
 	 			return;
 	 		}
 		    // エラーメッセージをクリアする
 		    registForm.pass.setCustomValidity("");
 		    // パスワードの一致確認
 		    if (registForm.pass.value != registForm.passConfirm.value) {
 		      // 一致していなかったら、エラーメッセージを表示する
 		      registForm.pass.setCustomValidity("パスワードと確認用パスワードが一致しません");
 		    }   
 		    if(registForm.pass.value.length < 6　 || registForm.pass.value.length > 20){
 		    	 registForm.pass.setCustomValidity("パスワードは6文字以上20文字以内にしてください");
 		    }
 
 		var response =　$.ajax({
  				url: API_PATH + "registSalon",
  				type: "POST",
  				async: false,
  				dataType: "text",
  				data:{
  				  userName : contactUser.value,
  				  salonName : salonName.value,
  				  parentArea : parentArea[0],
  				  childArea :  childArea[0],
  				  address : address.value,
  				  tel : tel.value,
  				  mail : mail.value,
  				  pass : pass.value,
  				},
  			    success: function(data, status) {
  			    	location.href = "#open01";
  			    }
  		}).responseText;
 		
 	   }
 	   function load(){
 
 		 var component_salon_country = document.getElementById('salon_country');
 		 var component_salon_area = document.getElementById('salon_area');
 		
 		 var response =　$.ajax({
 				url: API_PATH + "getCountryAreaList",
 				type: "POST",
 				async: false,
 				dataType: "text",
 		}).responseText;
 		
 		country_area_info = JSON.parse(response);
 		sanitaize.decode(country_area_info);
 		  
 		  var country_area_id_info = new Array();
 		  for (var i = 0; i < country_area_info.area.length; i++) {
 		  	var area_id = country_area_info.area[i].t_area_id;
 		  	var area_name = country_area_info.area[i].t_area_name;
 		  	areas[i] = {area_id: area_id, area_name: area_name};
 		  	component_salon_country.options[i]　=new Option(area_name);
 		 	// component_salon_area.options[i] = new Option():
 		  }
 		  // areaを参照しやすい形に変換
 		  var area_name = getAreaNameBySlaveAreaName(country_area_info.area, country_area_info.area[0].area_slave[0].t_area_name);
 		  areas_slave = getSlaveAreasByAreaName(country_area_info.area, area_name);
		  for(var i=0; i< areas_slave.length; i++){
			  component_salon_area.options[i] = new Option(areas_slave[i].t_area_name);
		  }
 		  //ページロード時は初期選択の地域のIDをいれておく
 		  parentArea.push(country_area_info.area[0].t_area_id);
 		  childArea.push(areas_slave[0].t_area_id);
 	   }
 	   load();
       
</script>
  </body>
</html>
